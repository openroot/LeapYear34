<!DOCTYPE html>
<html lang="en">
	<head>
		<title>LeapYear - Schematic Engine</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
		<link rel="stylesheet" type="text/css" href="Source/CSS/Custom.css">
	</head>

	<body>
		<header class="bg-dark text-white p-3">
			<div class="container-fluid d-flex justify-content-between align-items-center">
				<div class="d-flex align-items-center">
					<!--<button class="navbar-toggler d-lg-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#sidebar" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
						<i class="fas fa-bars text-white"></i>
					</button>-->
					<a class="navbar-brand text-white" href="#">LeapYear: Schematic Engine</a>
				</div>
				<!--<ul class="nav d-none d-lg-flex">
					<li class="nav-item">
						<a class="nav-link text-white" href="#">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white" href="#">Log</a>
					</li>
				</ul>-->
			</div>
		</header>

		<div id="main-container">
			<!--<aside id="sidebar" class="bg-light border-right d-lg-block p-3 collapse">
				<h5 class="mb-3">Action</h5>
				<div class="list-group mb-4">
					<a href="#" class="list-group-item list-group-item-action">New</a>
					<a href="#" class="list-group-item list-group-item-action">Load</a>
					<a href="#" class="list-group-item list-group-item-action">Settings</a>
				</div>
				<hr>
				<h5 class="mt-4 mb-3">Menu</h5>
				<div class="list-group">
					<a href="#" class="list-group-item list-group-item-action">Dashboard</a>
					<a href="#" class="list-group-item list-group-item-action">Profile</a>
					<a href="#" class="list-group-item list-group-item-action">Help</a>
				</div>
			</aside>
			<div id="sidebar-backdrop" class="d-lg-none"></div>-->
			<main id="content-wrapper" class="p-3">
				<div id="context-area" class="bg-light border p-3 mt-1 mb-3">
					Context
				</div>
				<div id="content-area" class="row">
					<div id="content-start" class="col-lg-8 my-1">
						<div id="textarea-container">
							<textarea id="text-statement" class="form-control full-height-textarea w-100" placeholder="Type text statement here..." aria-label="Input text statement"></textarea>
						</div>
					</div>
					<div id="content-end" class="col-lg-4 my-1">
						<div id="information-container"></div>
					</div>
				</div>
			</main>
		</div>

		<div class="bg-light border-top p-3 d-flex justify-content-end">
			<div class="row mr-0">
				<button id="action-paste" type="button" class="btn btn-outline-secondary btn-sm ml-2 my-1">Paste</button>
				<button id="action-reset" type="button" class="btn btn-outline-info btn-sm ml-2 my-1">Reset</button>
				<button id="action-submit" type="button" class="btn btn-outline-primary btn-sm ml-2 mr-5 my-1">Submit</button>
				<button id="action-save" type="button" class="btn btn-primary btn-sm ml-2 my-1">Save</button>
			</div>
		</div>

		<footer class="bg-dark text-white text-center p-3">
			<div class="container-fluid">
				<span>&copy; 2025 - 2026 LeapYear. All rights reserved.</span>
			</div>
		</footer>

		<script>
			$(document).ready(() => {
				$("#sidebar").on("show.bs.collapse", () => {
					$("#sidebar-backdrop").show();
				}).on("hide.bs.collapse", () => {
					$("#sidebar-backdrop").hide();
				});
				$("#sidebar-backdrop").on("click", () => {
					$("#sidebar").collapse("hide");
				});
			});
		</script>
	</body>

	<script>
		var quantumIdentity = {
			"englishLetter": {
				"a": 3, "b": 2, "c": 3, "d": 3, "e": 3, "f": 5, "g": 3, "h": 4, "i": 3, "j": 5, "k": 5, "l": 7, "m": 5, "n": 5, "o": 5, "p": 5, "q": 4, "r": 4, "s": 5, "t": 3, "u": 5, "v": 2, "w": 7, "x": 1, "y": 6, "z": 6,
				"A": 3, "B": 2, "C": 3, "D": 3, "E": 3, "F": 5, "G": 3, "H": 4, "I": 3, "J": 5, "K": 5, "L": 7, "M": 5, "N": 5, "O": 5, "P": 5, "Q": 4, "R": 4, "S": 5, "T": 3, "U": 5, "V": 2, "W": 7, "X": 1, "Y": 6, "Z": 6
			}
		};

		function arrayIntoString(arr, delimiter = ", ", prefix = "", suffix = "") {
			return arr.length > 0 ? prefix + arr.join(delimiter) + suffix : "";
		}
		function integerFactors(numb) {
			let factors = [];
			if (Number.isInteger(numb) && numb > 0) {
				numb = parseInt(numb);
				for (factor = 2; factor < numb; factor++) {
					if (numb % factor === 0) {
						factors.push(factor);
					}
				}
			}
			return factors;
		}
		/* Text: Text Statement */
		// Quant: Quantum Total
		function textQuant(text) {
			let quant = 0;
			if (text !== "") {
				textCharacter(text).forEach((character) => {
					if (quantumIdentity.englishLetter[character] > 0) {
						quant += quantumIdentity.englishLetter[character];
					}
				});
			}
			return quant;
		}
		// Character: All Characters
		function textCharacter(text) {
			return text.split("") || [];
		}
		// Line: All Lines
		function textLine(text) {
			return text.split(/\r?\n/gu) || [];
		}
		// Word: All Words
		function textWord(text) {
			return text.split(/\s+/gu).filter(word => word.trim() !== "") || [];
		}
		// Sentence: All Sentences
		function textSentence(text) {
			const sentences = text.split(/[.?!]+[\s\r\n]+/gu).filter(sentence => sentence.trim() !== "");
			return sentences.map((element, index) => {
				if (index < sentences.length - 1) {
					return element + ".";
				}
				else {
					return element;
				}
			}) || [];
		}
		// Paragraph: All Paragraphs
		function textParagraph(text) {
			return text.split(/\r?\n\r?\n/gu).filter(paragraph => paragraph.trim() !== "") || [];
		}
		// Space: All Spaces
		function textSpace(text) {
			return text.match(/ /gu) || [];
		}
		// Tab: All Tabulators
		function textTab(text) {
			return text.match(/\t/gu) || [];
		}
		// Mark: Unique Specials
		function textMark(text) {
			return [...new Set(text.match(/[^\s\w]/gu) || [])];
		}
		// Texture: Unique Characters
		function textTexture(text) {
			return [...new Set(text)];
		}
		// Unique: Unique Words
		function textUnique(text) {
			return [...new Set(textWord(text))];
		}
		// Repeat: Repeated Words
		function textRepeat(text) {
			const words = textWord(text);
			const wordCounts = words.reduce((counts, word) => {
				counts[word] = (counts[word] || 0) + 1;
				return counts;
			}, {});
			const repeatedWords = words.filter(word => {
				return wordCounts[word] > 1;
			}) || [];
			return [...new Set(repeatedWords)];
		}
		// Modifier: All Symbols
		function textModifier(text) {
			return text.match(/\p{P}|\p{S}/gu) || [];
		}
		// Numeric: All Digits
		function textNumeric(text) {
			return text.match(/\d/gu)?.map(Number) || [];
		}
		// Alphabet: All Letters
		function textAlphabet(text) {
			return text.match(/\p{L}/gu) || [];
		}
		// Date: All Dates
		function textDate(text) {
			return text.match(/(\b\d{2,4}\b-\b\d{1,2}\b-\b\d{1,2}\b)|(\b\d{1,2}\b\/\b\d{1,2}\b\/\b\d{2,4}\b)/gu) || [];
		}
		// Time: All Times
		function textTime(text) {
			return text.match(/(\b\d{1,2}\b:\b\d{2}\b:\b\d{2}\b(?:\.\b\d{3}\b)?\s?(?:AM|PM)?)|(\b\d{1,2}\b:\b\d{2}\b(:\b\d{2}\b)?\s?(?:AM|PM)?)/giu) || [];
		}
		// Century: All Centuries
		function textCentury(text) {
			return (text.match(/(\b\d+(?:st|nd|rd|th)?\s+century+\s+(?:BC|BCE|AD|CE|B\.C\.?|A\.D\.?)\b)/giu) || []).map(century => century.trim());
		}
		// Matrix: Total Volume
		function textMatrix(text) {
			const lines = textLine(text);
			return lines.reduce((maximumLength, line) => {
				return Math.max(maximumLength, line.length);
			}, 0) * lines.length;
		}
		function traverseTextStatement(text) {
			let information = "";
			if (text !== "") {
				const data = {
					"Quant": ["..", "Quantum Total", textQuant(text)],
					"Character": ["1.", "All Characters", textCharacter(text).length],
					"Line": ["2.", "All Lines", textLine(text).length],
					"Word": ["3.", "All Words", textWord(text).length],
					"Sentence": ["4.", "All Sentences", textSentence(text).length],
					"Paragraph": ["5.", "All Paragraphs", textParagraph(text).length],
					"Space": ["6.", "All Spaces", textSpace(text).length],
					"Tab": ["7.", "All Tabulators", textTab(text).length],
					"Mark": ["8.", "Unique Specials", textMark(text).length],
					"Texture": ["9.", "Unique Characters", textTexture(text).length],
					"Unique": ["10.", "Unique Words", textUnique(text).length],
					"Repeat": ["11.", "Repeated Words", textRepeat(text).length],
					"Modifier": ["12.", "All Symbols", textModifier(text).length],
					"Numeric": ["13.", "All Digits", textNumeric(text).length],
					"Alphabet": ["14.", "All Letters", textAlphabet(text).length],
					"Date": ["15.", "All Dates", textDate(text).length],
					"Time": ["16.", "All Times", textTime(text).length],
					"Century": ["17.", "All Centuries", textCentury(text).length],
					"Matrix": ["::.", "Total Volume", textMatrix(text)]
				};
				let table = '<div class="table-responsive-sm"><table class="table table-hover table-borderless table-sm">';
				table += '<caption>Text: Text Statement</caption>';
				table += '<thead class="thead-light"><tr><th>Index</th><th>Identity</th><th>Value</th><th>Factor</th></tr></thead><tbody>';
				Object.entries(data).forEach(([key, value]) => {
					table += '<tr><td>' + value[0] + '</td><td data-toggle="tooltip" data-placement="right" title="' + value[1] + '">' + key + '</td><td>' + value[2] + '</td><td>' + arrayIntoString(integerFactors(value[2]), ", ", "{", "}") + '</td></tr>';
				});
				table += '</tbody></table></div>';
				information = table;
			}
			else {
				information = "Information";
			}
			$("#information-container").html(information);
		}
		async function pasteClipboardText() {
			try {
				const text = await navigator.clipboard.readText();
				if (text !== "") {
					$("#text-statement").val(text);
					traverseTextStatement(text);
				}
			} catch (error) {
				console.error("Failed to read clipboard contents: ", error);
			}
		}

		$(document).ready(() => {
			function submit() {
				traverseTextStatement($("#text-statement").val());
			}
			$('[data-toggle="tooltip"]').tooltip();
			$("#text-statement").on("keydown", function (event) {
				if (event.keyCode === 9) {
					event.preventDefault();
					const start = $(this).prop("selectionStart");
					const end = $(this).prop("selectionEnd");
					const statement = $(this).val();
					$(this).val(statement.substring(0, start) + "\t" + statement.substring(end));
					$(this).prop("selectionStart", start + 1);
					$(this).prop("selectionEnd", start + 1);
				}
			});
			$("#text-statement").on("keyup change", function () {
				traverseTextStatement($(this).val());
			});
			$("#text-statement").on("paste", (event) => {
				traverseTextStatement(event.originalEvent.clipboardData.getData("text"));
			});
			$("#action-paste").click(() => {
				$("#text-statement").focus();
				pasteClipboardText();
			});
			$("#action-reset").click(() => {
				$("#text-statement").val("");
				submit();
			});
			$("#action-submit").click(() => {
				submit();
			});
			submit();
		});
	</script>
</html>